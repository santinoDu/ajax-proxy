(this["webpackJsonpajax-proxy"]=this["webpackJsonpajax-proxy"]||[]).push([[0],{172:function(e,t,n){},173:function(e,t,n){},177:function(e,t){},179:function(e,t){},191:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){"use strict";n.r(t);var r=n(9),c=n(0),a=n.n(c),i=n(26),o=n.n(i),l=(n(172),n(73)),s=n(44),u=n(40),j=n(274),d=n(276),f=n(275),b=(n(173),n(174),n(84)),h=n(269),x=n(273),O=n(29),g=n(271),p=n(146),v=n.n(p),m=n(147),y=n(163),k=(n(191),b.a.Option),C=function(e){var t=e.list,n=e.setList,c=e.filters,a=function(e,r,c){var a=Object(s.a)(t);t.find((function(t){return t.key===e}))[r]=c,n(a)},i=function(e){var t=e||"",n=t[0];if(!"<{".includes(n))return"";try{var c="<"===n,a=Object(r.jsx)(y.a,{style:{marginLeft:10}});if(c){var i=Object(r.jsx)(m.a,{xml:t});return Object(r.jsx)(h.a,{content:i,title:"xml preview",trigger:"click",children:a})}var o=JSON.parse(t);return Object(r.jsx)(h.a,{content:Object(r.jsx)(v.a,{src:o}),title:"json preview",trigger:"click",children:a})}catch(l){console.log("eee",l)}return""},o=[{title:"URL(or postData) includes string",dataIndex:"url",render:function(e,t){return Object(r.jsx)(x.a,{value:t.url,onChange:function(e){return a(t.key,"url",e.target.value)}})}},{title:"replace content",dataIndex:"content",width:"30%",render:function(e,t){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(x.a,{value:t.content,onChange:function(e){return a(t.key,"content",e.target.value)},className:"eye-input"}),i(t.content)]})}},{title:"formators (multiple, sequential execution)",render:function(e,t){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.a,{defaultValue:t.filtersSelect,mode:"multiple",onChange:function(e){return a(t.key,"filtersSelect",e)},className:"eye-input",children:c.map((function(e){return Object(r.jsx)(k,{children:e.name},e.key)}))}),i(t.formatContent)]})}},{title:"open status",dataIndex:"active",render:function(e,t){return Object(r.jsx)(d.a,{checked:t.active,onChange:function(e){return a(t.key,"active",e)}})}},{title:"operation",dataIndex:"operation",render:function(e,c){return Object(r.jsx)("a",{onClick:function(){return e=c.key,void n(t.filter((function(t){return t.key!==e})));var e},children:"delete"})}}];return Object(r.jsxs)("div",{className:"proxy-table",children:[Object(r.jsx)("div",{style:{textAlign:"right"},children:Object(r.jsx)(O.a,{onClick:function(){var e={key:Object(f.a)(),content:'{"a": {"b": 2}}',filtersSelect:[],active:!0};n([].concat(Object(s.a)(t),[e]))},type:"primary",style:{marginBottom:16},children:"add new rule"})}),Object(r.jsx)(g.a,{rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t,columns:o,pagination:!1})]})},S=n(154),w=n.n(S),N=n(129),F=(n(264),n(265),n(270)),T=n(74),I=n(45),B=n(272),D=n(162),L=function(e){var t=e.onOk,n=e.visible,a=e.setVisible,i=Object(c.useState)(""),o=Object(u.a)(i,2),l=o[0],s=o[1],d=Object(c.useState)(""),f=Object(u.a)(d,2),b=f[0],h=f[1];return Object(r.jsxs)(j.a,{title:"add new filter",visible:n,onOk:function(){l&&b&&(t({name:l,filter:b}),a(!1))},onCancel:function(){a(!1)},children:[Object(r.jsxs)(T.a,{style:{marginBottom:20},children:[Object(r.jsx)(I.a,{span:6,children:"title"}),Object(r.jsx)(I.a,{span:18,children:Object(r.jsx)(x.a,{value:l,onChange:function(e){s(e.target.value)}})})]}),Object(r.jsxs)(T.a,{style:{marginBottom:20},children:[Object(r.jsx)(I.a,{span:6,children:"filter"}),Object(r.jsx)(I.a,{span:18,children:Object(r.jsx)(x.a.TextArea,{value:b,onChange:function(e){h(e.target.value)},rows:10,placeholder:"function format(json) {\n    json.version = {a: '1.0.0'};\n    return json;\n  }"})})]})]})},A=function(e){var t=e.filters,n=e.onChange,a=Object(c.useState)(!1),i=Object(u.a)(a,2),o=i[0],j=i[1],d={height:"300px"},b=function(e,c){return Object(r.jsx)(F.a,{title:"sure to delete?",onConfirm:function(){return function(e,r){var c=Object(s.a)(t);c.splice(r,1),n(c)}(0,c)},children:Object(r.jsx)("a",{children:"x"})})};return Object(r.jsxs)("div",{style:{marginBottom:20},children:[Object(r.jsx)("div",{className:"header",children:"Filters"}),Object(r.jsxs)(T.a,{gutter:16,children:[t.map((function(e,c){return Object(r.jsx)(I.a,{className:"gutter-row",span:6,children:Object(r.jsx)(B.a,{title:e.name,extra:e.editDisable?"":b(0,c),bodyStyle:{maxHeight:"242px",overflow:"hidden",overflowY:"scroll"},style:d,children:Object(r.jsx)(w.a,{value:e.filter,onValueChange:function(e){return function(e,r){if(!t[r].editDisable){var c=Object(s.a)(t);c[r].filter=e,n(c)}}(e,c)},highlight:function(e){return Object(N.highlight)(e,N.languages.js)},padding:10})})},e.key)})),Object(r.jsx)(I.a,{className:"gutter-row",span:6,children:Object(r.jsx)(B.a,{onClick:function(){j(!0)},style:Object(l.a)(Object(l.a)({},d),{},{textAlign:"center"}),children:Object(r.jsx)("a",{style:{fontSize:"50px",lineHeight:"250px"},children:Object(r.jsx)(D.a,{})})})})]}),Object(r.jsx)(L,{onOk:function(e){var r=e.name,c=e.func,a=e.filter,i=Object(s.a)(t);i.push({key:Object(f.a)(),name:r,func:c,filter:a,editDisable:!1}),n(i)},visible:o,setVisible:j})]})},J=(n(266),function(e){var t=e.list,n=e.onChange,a=e.handleClearTable,i=Object(c.useState)([]),o=Object(u.a)(i,2),l=o[0],s=o[1],j={selectedRowKeys:l,onChange:function(e,t){var r=e.filter((function(e){return!l.includes(e)})),c=l.filter((function(t){return!e.includes(t)})),a=r.length?"add":"delete",i="add"===a?r:c,o=t.filter((function(e){return i.includes(e.key)}));n(a,"add"===a?o:c),s(e)}};return Object(r.jsxs)("div",{className:"proxy-table",children:[Object(r.jsxs)("div",{className:"header",style:{textAlign:"right"},children:[Object(r.jsx)("span",{style:{float:"left"},children:"fetched xhr"}),Object(r.jsx)(O.a,{onClick:a,type:"primary",style:{marginBottom:16},children:"remove list"})]}),Object(r.jsx)(g.a,{className:"fetched-list",bordered:!0,dataSource:t,columns:[{title:"url",dataIndex:"url",width:"40%"},{title:"response",dataIndex:"content",render:function(e,t){var n=t.content||"";return n.length>2e3?"".concat(n.slice(0,2e3),"..."):n}}],pagination:!1,rowSelection:j})]})}),E="proxy-debug-status";var V=function(){var e=Object(c.useState)([{key:"1",name:"example",editDisable:!1,filter:"function format(json) {\n        json.version = '1.0.0';\n        return json;\n      }"}]),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),o=Object(u.a)(i,2),b=o[0],h=o[1],x=Object(c.useState)(!1),O=Object(u.a)(x,2),g=O[0],p=O[1],v=Object(c.useState)([]),m=Object(u.a)(v,2),y=m[0],k=m[1],S=function(e){h(e),chrome.storage.local.set({proxyTable:e},(function(){console.log("proxyTable saved")}))};Object(c.useEffect)((function(){chrome.storage.local.get(["proxyTable","proxyFilters"],(function(e){e.proxyTable&&h(e.proxyTable),e.proxyFilters&&a(e.proxyFilters)})),window.addEventListener("message",(function(e){var t=e.data;if(t){var n=t.source,r=t.action;if("fetch-xhr"===n&&k((function(e){return[Object(l.a)(Object(l.a)({},r),{},{key:Object(f.a)()})].concat(Object(s.a)(e)).slice(0,100)})),n===E)return p(r);if("proxy-match-multiple"===n){var c=r.filteredData,a=r.request;return j.a.error({title:"find multiple results, please modify before proxy",content:"".concat(a.url," finds ").concat(c.map((function(e){return e.url})).join(",  ")," results"),onOk:function(){}})}}}))}),[]);var w=function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;try{var r=JSON.parse(t);return e.map((function(e){return n.find((function(t){return t.key===e})).filter})).reduce((function(e,t){return new Function("{ return "+t+" };").call(null).call(null,e)}),r)}catch(c){console.log("e",c)}return""}(e,t);return"object"===typeof r?JSON.stringify(r):r};return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsxs)("div",{children:["Proxy Status:",Object(r.jsx)(d.a,{checkedChildren:"on",unCheckedChildren:"off",checked:g,onChange:function(e){p(e),window.postMessage({action:e,source:E},"*")}})]}),Object(r.jsx)(C,{filters:n,list:b,setList:function(e){e.forEach((function(e){e.filtersSelect&&e.filtersSelect.length?e.formatContent=w(e.filtersSelect,e.content):e.formatContent=e.content})),S(e)}}),Object(r.jsx)(A,{filters:n,onChange:function(e){a(e),chrome.storage.local.set({proxyFilters:e},(function(){console.log("proxyFilters saved")}))}}),Object(r.jsx)(J,{list:y,onChange:function(e,t){if("add"===e)S([].concat(Object(s.a)(b),Object(s.a)(t)));else{var n=b.filter((function(e){return!t.includes(e.key)}));S(n)}},handleClearTable:function(){k([])}})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,277)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(V,{})}),document.getElementById("root")),P()}},[[267,1,2]]]);
//# sourceMappingURL=main.e7c8a603.chunk.js.map